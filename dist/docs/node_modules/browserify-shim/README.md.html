<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "home/danny/youlooknice/node_modules/browserify-shim/READMEmd", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#browserify-shim%20">browserify-shim </a>
      </div>
      <div class="heading h3">
        <a href="#make%20commonjs-incompatible%20files%20browserifyable">Make CommonJS-Incompatible Files Browserifyable</a>
      </div>
      <div class="heading h4">
        <a href="#package.json">package.json</a>
      </div>
      <div class="heading h2">
        <a href="#installation">Installation</a>
      </div>
      <div class="heading h2">
        <a href="#features">Features</a>
      </div>
      <div class="heading h2">
        <a href="#api">API</a>
      </div>
      <div class="heading h3">
        <a href="#you%20will%20always">You Will Always</a>
      </div>
      <div class="heading h4">
        <a href="#1.%20install%20browserify-shim%20dependency">1. Install browserify-shim dependency</a>
      </div>
      <div class="heading h4">
        <a href="#2.%20register%20browserify-shim%20as%20a%20transform%20with%20browserify">2. Register browserify-shim as a transform with browserify</a>
      </div>
      <div class="heading h4">
        <a href="#3.%20provide%20browserify-shim%20config">3. Provide browserify-shim config</a>
      </div>
      <div class="heading h5">
        <a href="#short%20form%20vs.%20long%20form%20config">Short Form vs. Long Form config</a>
      </div>
      <div class="heading h3">
        <a href="#you%20will%20sometimes">You will sometimes</a>
      </div>
      <div class="heading h4">
        <a href="#a)%20expose%20global%20variables%20via%20global%3A*">a) Expose global variables via global:*</a>
      </div>
      <div class="heading h5">
        <a href="#1.%20add%20script%20tag%20for%20library%20you%20want%20to%20expose">1. add script tag for library you want to expose</a>
      </div>
      <div class="heading h5">
        <a href="#2.%20add%20expose%20global%20config%20to%20package.json">2. Add expose global config to package.json</a>
      </div>
      <div class="heading h5">
        <a href="#2.a.%20add%20expose%20global%20config%20to%20external%20shim%20config">2.a. Add expose global config to external shim config</a>
      </div>
      <div class="heading h5">
        <a href="#3.%20require%20library%20by%20the%20name%20it%20was%20exposed%20as">3. Require library by the name it was exposed as</a>
      </div>
      <div class="heading h5">
        <a href="#why%20not%20just%20var%20three%20%3D%20window.three%3F">Why not just var THREE = window.THREE?</a>
      </div>
      <div class="heading h4">
        <a href="#b)%20use%20aliases">b) Use aliases</a>
      </div>
      <div class="heading h4">
        <a href="#c)%20provide%20an%20external%20shim%20config">c) Provide an external shim config</a>
      </div>
      <div class="heading h4">
        <a href="#d)%20diagnose%20what%20browserify-shim%20is%20doing">d) Diagnose what browserify-shim is doing</a>
      </div>
      <div class="heading h2">
        <a href="#multi%20shim%20example%20including%20dependencies">Multi Shim Example including dependencies</a>
      </div>
      <div class="heading h3">
        <a href="#a)%20config%20inside%20package.json%20without%20aliases">a) Config inside package.json without aliases</a>
      </div>
      <div class="heading h3">
        <a href="#b)%20config%20inside%20package.json%20with%20aliases">b) Config inside package.json with aliases</a>
      </div>
      <div class="heading h3">
        <a href="#c)%20config%20inside%20.%2Fconfig%2Fshim.js%20without%20aliases">c) Config inside ./config/shim.js without aliases</a>
      </div>
      <div class="heading h4">
        <a href="#package.json">package.json</a>
      </div>
      <div class="heading h4">
        <a href="#shim.js">shim.js</a>
      </div>
      <div class="heading h2">
        <a href="#more%20examples">More Examples</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="docs markdown">
<div class="pilwrap" id="browserify-shim%20">
  <h1>
    <a href="#browserify-shim%20" name="browserify-shim%20" class="pilcrow">&#182;</a>
    browserify-shim <a href="http://travis-ci.org/thlorenz/browserify-shim"><img src="https://secure.travis-ci.org/thlorenz/browserify-shim.png?branch=master" alt="build status" title="" /></a>
  </h1>
</div>


<p><a href="https://nodei.co/npm/browserify-shim/"><img src="https://nodei.co/npm/browserify-shim.png?downloads=true&amp;stars=true" alt="NPM" title="" /></a></p>


<div class="pilwrap" id="make%20commonjs-incompatible%20files%20browserifyable">
  <h3>
    <a href="#make%20commonjs-incompatible%20files%20browserifyable" name="make%20commonjs-incompatible%20files%20browserifyable" class="pilcrow">&#182;</a>
    Make CommonJS-Incompatible Files Browserifyable
  </h3>
</div>



<div class="pilwrap" id="package.json">
  <h4>
    <a href="#package.json" name="package.json" class="pilcrow">&#182;</a>
    package.json
  </h4>
</div>



<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;./js/entry.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;browser&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;jquery&quot;</span><span class="p">:</span> <span class="s2">&quot;./js/vendor/jquery.js&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;jquery&quot;</span><span class="p">:</span> <span class="s2">&quot;
~C1C
quot;</span><span class="p">,</span>
    <span class="nt">&quot;three&quot;</span><span class="p">:</span> <span class="s2">&quot;global:THREE&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;browserify-shim&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="s2">&quot;~3.2.0&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>




<div class="highlight"><pre><code><span class="nx">browserify</span> <span class="p">.</span> <span class="o">-</span><span class="nx">d</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">bundle</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div>



<!-- START doctoc generated TOC please keep comment here to allow auto update -->

<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<p><strong>Table of Contents</strong>  <em>generated with <a href="http://doctoc.herokuapp.com/">DocToc</a></em></p>

<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#api">API</a>
<ul><li><a href="#you-will-always">You Will Always</a>
<ul><li><a href="#1-install-browserify-shim-dependency">1. Install browserify-shim dependency</a></li>
<li><a href="#2-register-browserify-shim-as-a-transform-with-browserify">2. Register browserify-shim as a transform with browserify</a></li>
<li><a href="#3-provide-browserify-shim-config">3. Provide browserify-shim config</a>
<ul><li><a href="#short-form-vs-long-form-config">Short Form vs. Long Form config</a></li></ul></li></ul></li>
<li><a href="#you-will-sometimes">You will sometimes</a>
<ul><li><a href="#a-expose-global-variables-via-global">a) Expose global variables via <code>global:*</code></a>
<ul><li><a href="#1-add-script-tag-for-library-you-want-to-expose">1. add script tag for library you want to expose</a></li>
<li><a href="#2-add-expose-global-config-to-packagejson">2. Add expose global config to <code>package.json</code></a></li>
<li><a href="#2a-add-expose-global-config-to-external-shim-config">2.a. Add expose global config to external shim config</a></li>
<li><a href="#3-require-library-by-the-name-it-was-exposed-as">3. Require library by the name it was exposed as</a></li>
<li><a href="#why-not-just-var-three-=-windowthree">Why not just <code>var THREE = window.THREE</code>?</a></li></ul></li>
<li><a href="#b-use-aliases">b) Use aliases</a></li>
<li><a href="#c-provide-an-external-shim-config">c) Provide an external shim config</a></li>
<li><a href="#d-diagnose-what-browserify-shim-is-doing">d) Diagnose what browserify-shim is doing</a></li></ul></li></ul></li>
<li><a href="#multi-shim-example-including-dependencies">Multi Shim Example including dependencies</a>
<ul><li><a href="#a-config-inside-packagejson-without-aliases">a) Config inside <code>package.json</code> without aliases</a></li>
<li><a href="#b-config-inside-packagejson-with-aliases">b) Config inside <code>package.json</code> with aliases</a></li>
<li><a href="#c-config-inside-configshimjs-without-aliases">c) Config inside <code>./config/shim.js</code> without aliases</a>
<ul><li><a href="#packagejson"><code>package.json</code></a></li>
<li><a href="#shimjs"><code>shim.js</code></a></li></ul></li></ul></li>
<li><a href="#more-examples">More Examples</a></li>
</ul>

<!-- END doctoc generated TOC please keep comment here to allow auto update -->


<div class="pilwrap" id="installation">
  <h2>
    <a href="#installation" name="installation" class="pilcrow">&#182;</a>
    Installation
  </h2>
</div>



<div class="highlight"><pre><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">browserify</span><span class="o">-</span><span class="nx">shim</span>
</code></pre></div>



<p><em>For a version compatible with <a href='mailto:browserify@1.x'>browserify@1.x</a> run <code>npm install <a href='mailto:browserify-shim@1.x'>browserify-shim@1.x</a></code> instead.</em></p>

<p><em>For a version compatible with the <a href="https://github.com/thlorenz/browserify-shim/tree/v2#api">v2 API</a> <code>npm install <a href='mailto:browserify-shim@2.x'>browserify-shim@2.x</a></code> instead.</em></p>


<div class="pilwrap" id="features">
  <h2>
    <a href="#features" name="features" class="pilcrow">&#182;</a>
    Features
  </h2>
</div>


<p>The core features of browserify-shim are:</p>

<ul>
<li>Shims <strong>non-CommonJS</strong> modules in order for them to be <strong>browserified</strong> by specifying an alias, the path to the file,
and the identifier under which the module attaches itself to the global <code>window</code> object.</li>
<li>Includes <code>depends</code> for  shimming libraries that depend on other libraries being in the global namespace.</li>
<li>applies shims configured inside the dependencies of your package</li>
</ul>

<p>Additionally, it handles the following real-world edge cases:</p>

<ul>
<li>Modules that just declare a <code>var foo = ...</code> on the script level and assume it gets attached to the <code>window</code> object.
Since the only way they will ever be run is in the global context — "ahem, … NO?!"</li>
<li>Makes <code>define</code> and also <code>module</code> be <code>undefined</code>, in order to fix <a href="https://github.com/mhemesath/r2d3/blob/918bd076e4f980722438b2594d1eba53a522ce75/r2d3.v2.js#L222">improperly-authored
libraries</a> that need
shimming but try anyway to use AMD or CommonJS. For more info read the comment inside <a href="https://github.com/thlorenz/browserify-shim/blob/master/test/fixtures/shims/lib-with-exports-define-global-problem.js">this
fixture</a></li>
<li>removes invalid requires, i.e. <code>require('jquery')</code> although <code>'jquery'</code> isn't installed due to the library being
improperly published or <em>installed</em> incorrectly via a downloader like <a href="http://bower.io/">bower</a></li>
</ul>

<p>Since <code>browserify-shim</code> is a proper <code>browserify</code> transform you can publish packages with files that need to be shimmed,
granted that you specify the shim config inside the <code>package.json</code>.</p>

<p>When <code>browserify</code> resolves your package it will run the <code>browserify-shim</code> transform and thus shim what's necessary
when generating the bundle.</p>


<div class="pilwrap" id="api">
  <h2>
    <a href="#api" name="api" class="pilcrow">&#182;</a>
    API
  </h2>
</div>



<div class="pilwrap" id="you%20will%20always">
  <h3>
    <a href="#you%20will%20always" name="you%20will%20always" class="pilcrow">&#182;</a>
    You Will Always
  </h3>
</div>



<div class="pilwrap" id="1.%20install%20browserify-shim%20dependency">
  <h4>
    <a href="#1.%20install%20browserify-shim%20dependency" name="1.%20install%20browserify-shim%20dependency" class="pilcrow">&#182;</a>
    1. Install browserify-shim dependency
  </h4>
</div>


<p>In most cases you want to install it as a <a href="https://npmjs.org/doc/json.html#devDependencies">devDependency</a> via:</p>


<div class="highlight"><pre><code><span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">D</span> <span class="nx">browserify</span><span class="o">-</span><span class="nx">shim</span>
</code></pre></div>




<div class="pilwrap" id="2.%20register%20browserify-shim%20as%20a%20transform%20with%20browserify">
  <h4>
    <a href="#2.%20register%20browserify-shim%20as%20a%20transform%20with%20browserify" name="2.%20register%20browserify-shim%20as%20a%20transform%20with%20browserify" class="pilcrow">&#182;</a>
    2. Register browserify-shim as a transform with browserify
  </h4>
</div>


<p>Inside <code>package.json</code> add:</p>


<div class="highlight"><pre><code><span class="p">{</span> 
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;browserify-shim&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>




<div class="pilwrap" id="3.%20provide%20browserify-shim%20config">
  <h4>
    <a href="#3.%20provide%20browserify-shim%20config" name="3.%20provide%20browserify-shim%20config" class="pilcrow">&#182;</a>
    3. Provide browserify-shim config
  </h4>
</div>


<p>Inside <code>package.json</code> add:</p>


<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;./js/vendor/jquery.js&quot;</span><span class="p">:</span> <span class="s2">&quot;
~C6C
quot;</span><span class="p">,</span>
    <span class="nt">&quot;three&quot;</span><span class="p">:</span> <span class="s2">&quot;global:THREE&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p>The above includes <code>./js/vendor/jquery.js</code> (relative to the <code>package.json</code>) in the bundle and exports <code>window.$</code>.</p>

<p>Additionally it exposes <code>window.THREE</code> as <code>three</code>, so you can <code>var three = require('three')</code>. More info
<a href="#a-expose-global-variables-via-global">below</a>.</p>


<div class="pilwrap" id="short%20form%20vs.%20long%20form%20config">
  <h5>
    <a href="#short%20form%20vs.%20long%20form%20config" name="short%20form%20vs.%20long%20form%20config" class="pilcrow">&#182;</a>
    Short Form vs. Long Form config
  </h5>
</div>


<p>Since <code>jquery</code> does not depend on other shimmed modules and thus has no <code>depends</code> field, we used the short form to
specify its exports, however the example above is equivalent to:</p>


<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;./js/vendor/jquery.js&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;exports&quot;</span><span class="p">:</span> <span class="s2">&quot;
~C7C
quot;</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>




<div class="pilwrap" id="you%20will%20sometimes">
  <h3>
    <a href="#you%20will%20sometimes" name="you%20will%20sometimes" class="pilcrow">&#182;</a>
    You will sometimes
  </h3>
</div>



<div class="pilwrap" id="a)%20expose%20global%20variables%20via%20global%3A*">
  <h4>
    <a href="#a)%20expose%20global%20variables%20via%20global%3A*" name="a)%20expose%20global%20variables%20via%20global%3A*" class="pilcrow">&#182;</a>
    a) Expose global variables via <code>global:*</code>
  </h4>
</div>


<p>In some cases the libraries you are using are very large and you'd prefer to add them via a script tag instead to get
the following benefits:</p>

<ul>
<li>faster bundling times since the library is not included in the bundle</li>
<li>pull libraries from a <a href="http://en.wikipedia.org/wiki/Content_delivery_network">CDN</a> which allows it to be pulled
straight from the user's browser cache in case it was downloaded before</li>
</ul>

<p>We'll show how this works by taking the rather huge yet awesome <code>THREE.js</code> library as an example:</p>


<div class="pilwrap" id="1.%20add%20script%20tag%20for%20library%20you%20want%20to%20expose">
  <h5>
    <a href="#1.%20add%20script%20tag%20for%20library%20you%20want%20to%20expose" name="1.%20add%20script%20tag%20for%20library%20you%20want%20to%20expose" class="pilcrow">&#182;</a>
    1. add script tag for library you want to expose
  </h5>
</div>



<div class="highlight"><pre><code><span class="c">&lt;!-- index.html --&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">utf-8</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://cdnjs.cloudflare.com/ajax/libs/three.js/r61/three.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</code></pre></div>




<div class="pilwrap" id="2.%20add%20expose%20global%20config%20to%20package.json">
  <h5>
    <a href="#2.%20add%20expose%20global%20config%20to%20package.json" name="2.%20add%20expose%20global%20config%20to%20package.json" class="pilcrow">&#182;</a>
    2. Add expose global config to <code>package.json</code>
  </h5>
</div>



<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;three&quot;</span><span class="p">:</span> <span class="s2">&quot;global:THREE&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>




<div class="pilwrap" id="2.a.%20add%20expose%20global%20config%20to%20external%20shim%20config">
  <h5>
    <a href="#2.a.%20add%20expose%20global%20config%20to%20external%20shim%20config" name="2.a.%20add%20expose%20global%20config%20to%20external%20shim%20config" class="pilcrow">&#182;</a>
    2.a. Add expose global config to external shim config
  </h5>
</div>


<p>In case you are using an extenal shim config, you may achieve the same by specifying the global via an <code>export</code>.</p>


<div class="highlight"><pre><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">three</span><span class="p">.</span><span class="nx">js</span><span class="s1">&#39;: { exports: &#39;</span><span class="nx">global</span><span class="o">:</span><span class="nx">THREE</span><span class="err">&#39;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p><a href="#c-config-inside-configshimjs-without-aliases">more about extenal configs here</a></p>

<p><strong>Note:</strong> <code>THREE.js</code> attaches <code>window.THREE</code>.</p>


<div class="pilwrap" id="3.%20require%20library%20by%20the%20name%20it%20was%20exposed%20as">
  <h5>
    <a href="#3.%20require%20library%20by%20the%20name%20it%20was%20exposed%20as" name="3.%20require%20library%20by%20the%20name%20it%20was%20exposed%20as" class="pilcrow">&#182;</a>
    3. Require library by the name it was exposed as
  </h5>
</div>



<div class="highlight"><pre><code><span class="kd">var</span> <span class="nx">THREE</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;three&#39;</span><span class="p">);</span>
</code></pre></div>




<div class="pilwrap" id="why%20not%20just%20var%20three%20%3D%20window.three%3F">
  <h5>
    <a href="#why%20not%20just%20var%20three%20%3D%20window.three%3F" name="why%20not%20just%20var%20three%20%3D%20window.three%3F" class="pilcrow">&#182;</a>
    Why not just <code>var THREE = window.THREE</code>?
  </h5>
</div>


<p>You want to avoid spreading the knowledge that <code>THREE</code> is a global and stay consistent in how you resolve dependencies.
Additionally if <code>THREE</code> would ever be published to <a href="https://npmjs.org/">npm</a> and you decide to install it from there,
you don't have to change any of your code since it already is <code>require</code>ing it properly.</p>


<div class="pilwrap" id="b)%20use%20aliases">
  <h4>
    <a href="#b)%20use%20aliases" name="b)%20use%20aliases" class="pilcrow">&#182;</a>
    b) Use aliases
  </h4>
</div>


<p>You may expose files under a different name via the <a href="https://gist.github.com/defunctzombie/4339901#replace-specific-files---advanced"><code>browser</code> field</a> and refer to them under that alias in the shim config:</p>


<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browser&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;jquery&quot;</span><span class="p">:</span> <span class="s2">&quot;./js/vendor/jquery.js&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;jquery&quot;</span><span class="p">:</span> <span class="s2">&quot;
~C12C
quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p>This also allows you to require this module under the alias, i.e.: <code>var $ = require('jquery')</code>.</p>


<div class="pilwrap" id="c)%20provide%20an%20external%20shim%20config">
  <h4>
    <a href="#c)%20provide%20an%20external%20shim%20config" name="c)%20provide%20an%20external%20shim%20config" class="pilcrow">&#182;</a>
    c) Provide an external shim config
  </h4>
</div>



<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="s2">&quot;./config/shim.js&quot;</span>
<span class="p">}</span>
</code></pre></div>



<p>The external shim format is very similar to the way in which the shim is specified inside the <code>package.json</code>. See
<a href="#c-config-inside-configshimjs-without-aliases">below</a> for more details.</p>


<div class="pilwrap" id="d)%20diagnose%20what%20browserify-shim%20is%20doing">
  <h4>
    <a href="#d)%20diagnose%20what%20browserify-shim%20is%20doing" name="d)%20diagnose%20what%20browserify-shim%20is%20doing" class="pilcrow">&#182;</a>
    d) Diagnose what browserify-shim is doing
  </h4>
</div>


<p>You may encounter problems when your shim config isn't properly setup. In that case you can diagnose them via the
<code>BROWSERIFYSHIM_DIAGNOSTICS</code> flag.</p>

<p>Simply set the flag when building your bundle, i.e.: </p>


<div class="highlight"><pre><code><span class="nx">BROWSERIFYSHIM_DIAGNOSTICS</span><span class="o">=</span><span class="mi">1</span> <span class="nx">browserify</span> <span class="o">-</span><span class="nx">d</span> <span class="p">.</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">js</span><span class="o">/</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div>



<p>or in a <code>build.js</code> script add: <code>process.env.BROWSERIFYSHIM_DIAGNOSTICS=1</code> to the top.</p>


<div class="pilwrap" id="multi%20shim%20example%20including%20dependencies">
  <h2>
    <a href="#multi%20shim%20example%20including%20dependencies" name="multi%20shim%20example%20including%20dependencies" class="pilcrow">&#182;</a>
    Multi Shim Example including dependencies
  </h2>
</div>


<p>Some libraries depend on other libraries to have attached their exports to the window for historical reasons :(.
(Hopefully soon we can truly say that this bad design is history.)</p>

<p>In this contrived example we are shimming four libraries since none of them are commonJS compatible:</p>

<ul>
<li><strong>x</strong> exports <strong>window.$</strong></li>
<li><strong>x-ui</strong> exports nothing since it just <strong>attaches itself to x</strong>. Therefore x-ui depends on x.</li>
<li><strong>y</strong> exports <strong>window.Y</strong> and also <strong>depends on x</strong> expecting to find it on the window as $.</li>
<li><strong>z</strong> exports <strong>window.zorro</strong> and <strong>depends on x and y</strong>. It expects to find x on the window as $, but y on the window as YNOT, 
which is actually different than the name under which y exports itself.</li>
</ul>

<p>We will be using the <code>depends</code> field in order to ensure that a dependency is included and initialized before a library
that depends on it is initialized.</p>

<p>Below are three examples, each showing a way to properly shim the above mentioned modules.</p>


<div class="pilwrap" id="a)%20config%20inside%20package.json%20without%20aliases">
  <h3>
    <a href="#a)%20config%20inside%20package.json%20without%20aliases" name="a)%20config%20inside%20package.json%20without%20aliases" class="pilcrow">&#182;</a>
    a) Config inside <code>package.json</code> without aliases
  </h3>
</div>



<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;browserify-shim&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;./vendor/x.js&quot;</span>    <span class="p">:</span>  <span class="s2">&quot;
~C15C
quot;</span><span class="p">,</span>
    <span class="nt">&quot;./vendor/x-ui.js&quot;</span> <span class="p">:</span>  <span class="p">{</span> <span class="nt">&quot;depends&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;./vendor/x.js&quot;</span> <span class="p">]</span> <span class="p">},</span>
    <span class="nt">&quot;./vendor/y.js&quot;</span>    <span class="p">:</span>  <span class="p">{</span> <span class="nt">&quot;exports&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="nt">&quot;depends&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;./vendor/x.js:
~C15C
quot;</span> <span class="p">]</span> <span class="p">},</span>
    <span class="nt">&quot;./vendor/z.js&quot;</span>    <span class="p">:</span>  <span class="p">{</span> <span class="nt">&quot;exports&quot;</span><span class="p">:</span> <span class="s2">&quot;zorro&quot;</span><span class="p">,</span> <span class="nt">&quot;depends&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;./vendor/x.js:
~C15C
quot;</span><span class="p">,</span> <span class="s2">&quot;./vendor/y.js:YNOT&quot;</span> <span class="p">]</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p><strong>Note:</strong> the <code>depends</code> array consists of entries of the format <code>path-to-file:export</code></p>


<div class="pilwrap" id="b)%20config%20inside%20package.json%20with%20aliases">
  <h3>
    <a href="#b)%20config%20inside%20package.json%20with%20aliases" name="b)%20config%20inside%20package.json%20with%20aliases" class="pilcrow">&#182;</a>
    b) Config inside <code>package.json</code> with aliases
  </h3>
</div>



<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;browserify-shim&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;browser&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;x&quot;</span>    <span class="p">:</span>  <span class="s2">&quot;./vendor/x.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;x-ui&quot;</span> <span class="p">:</span>  <span class="s2">&quot;./vendor/x-ui.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;y&quot;</span>    <span class="p">:</span>  <span class="s2">&quot;./vendor/y.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;z&quot;</span>    <span class="p">:</span>  <span class="s2">&quot;./vendor/z.js&quot;</span>
  <span class="p">},</span>
   <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;x&quot;</span>    <span class="p">:</span>  <span class="s2">&quot;
~C16C
quot;</span><span class="p">,</span>
    <span class="nt">&quot;x-ui&quot;</span> <span class="p">:</span>  <span class="p">{</span> <span class="nt">&quot;depends&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;x&quot;</span> <span class="p">]</span> <span class="p">},</span>
    <span class="nt">&quot;y&quot;</span>    <span class="p">:</span>  <span class="p">{</span> <span class="nt">&quot;exports&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="nt">&quot;depends&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;x:
~C16C
quot;</span> <span class="p">]</span> <span class="p">},</span>
    <span class="nt">&quot;z&quot;</span>    <span class="p">:</span>  <span class="p">{</span> <span class="nt">&quot;exports&quot;</span><span class="p">:</span> <span class="s2">&quot;zorro&quot;</span><span class="p">,</span> <span class="nt">&quot;depends&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;x:
~C16C
quot;</span><span class="p">,</span> <span class="s2">&quot;y:YNOT&quot;</span> <span class="p">]</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p><strong>Note:</strong> the <code>depends</code> entries make use of the aliases as well <code>alias:export</code></p>


<div class="pilwrap" id="c)%20config%20inside%20.%2Fconfig%2Fshim.js%20without%20aliases">
  <h3>
    <a href="#c)%20config%20inside%20.%2Fconfig%2Fshim.js%20without%20aliases" name="c)%20config%20inside%20.%2Fconfig%2Fshim.js%20without%20aliases" class="pilcrow">&#182;</a>
    c) Config inside <code>./config/shim.js</code> without aliases
  </h3>
</div>



<div class="pilwrap" id="package.json_1">
  <h4>
    <a href="#package.json_1" name="package.json_1" class="pilcrow">&#182;</a>
    <code>package.json</code>
  </h4>
</div>



<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;browserify-shim&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="s2">&quot;./config/shim.js&quot;</span>
<span class="p">}</span>
</code></pre></div>




<div class="pilwrap" id="shim.js">
  <h4>
    <a href="#shim.js" name="shim.js" class="pilcrow">&#182;</a>
    <code>shim.js</code>
  </h4>
</div>



<div class="highlight"><pre><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;../vendor/x.js&#39;</span>    <span class="o">:</span>  <span class="s1">&#39;
~C18C
#39;</span><span class="p">,</span>
  <span class="s1">&#39;../vendor/x-ui.js&#39;</span> <span class="o">:</span>  <span class="p">{</span> <span class="s1">&#39;depends&#39;</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;../vendor/x.js&#39;</span><span class="o">:</span> <span class="kc">null</span> <span class="p">}</span> <span class="p">},</span>
  <span class="s1">&#39;../vendor/y.js&#39;</span>    <span class="o">:</span>  <span class="p">{</span> <span class="s1">&#39;exports&#39;</span><span class="o">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="s1">&#39;depends&#39;</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;../vendor/x.js&#39;</span><span class="o">:</span> <span class="s1">&#39;
~C18C
#39;</span> <span class="p">}</span> <span class="p">},</span>
  <span class="s1">&#39;../vendor/z.js&#39;</span>    <span class="o">:</span>  <span class="p">{</span> <span class="s1">&#39;exports&#39;</span><span class="o">:</span> <span class="s1">&#39;zorro&#39;</span><span class="p">,</span> <span class="s1">&#39;depends&#39;</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;../vendor/x.js&#39;</span><span class="o">:</span> <span class="s1">&#39;
~C18C
#39;</span><span class="p">,</span> <span class="s1">&#39;../vendor/y.js&#39;</span><span class="o">:</span> <span class="s1">&#39;YNOT&#39;</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p><strong>Note:</strong> all paths are relative to <code>./config/shim.js</code> instead of the <code>package.json</code>.</p>

<p>The main difference to <code>a)</code> is the <code>depends</code> field specification. Instead it being an array of strings it expresses its dependencies as a hashmap:</p>

<ul>
<li><strong>key:</strong> <code>path-to-file</code> </li>
<li><strong>value:</strong>  the name under which it is expected to be attached on the window</li>
</ul>


<div class="pilwrap" id="more%20examples">
  <h2>
    <a href="#more%20examples" name="more%20examples" class="pilcrow">&#182;</a>
    More Examples
  </h2>
</div>


<ul>
<li><a href="https://github.com/thlorenz/browserify-shim/tree/master/examples/shim-jquery">shim-jquery</a></li>
<li><a href="https://github.com/thlorenz/browserify-shim/tree/master/examples/expose-jquery">expose-jquery</a></li>
<li><a href="https://github.com/thlorenz/browserify-shim/tree/master/examples/shim-jquery-external">shim-jquery-external</a></li>
<li>the <a href="https://github.com/thlorenz/browserify-shim/tree/master/test">tests</a> are a great resource to investigate the
different ways to configure shims and to understand how shims are applied to packages found inside the <code>node_modules</code>
of your package</li>
</ul>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/thlorenz/browserify-shim/trend.png" alt="Bitdeli Badge" title="" /></a></p></div>
  </div>
</body>
</html>
