<!DOCTYPE html>
<html>
<head>
  <title>Readme.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../", thisFile = "home/danny/youlooknice/node_modules/browserify-shim/examples/expose-jquery/Readmemd", defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#browserify-shim%20expose%20jquery">Browserify-Shim expose jquery</a>
      </div>
      <div class="heading h3">
        <a href="#bundling%20via%20the%20command%20line">Bundling via the command line</a>
      </div>
      <div class="heading h3">
        <a href="#bundling%20via%20a%20.js%20script">Bundling via a .js script</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="docs markdown">
<div class="pilwrap" id="browserify-shim%20expose%20jquery">
  <h1>
    <a href="#browserify-shim%20expose%20jquery" name="browserify-shim%20expose%20jquery" class="pilcrow">&#182;</a>
    Browserify-Shim expose jquery
  </h1>
</div>


<p>This example demonstrates expsing jquery by adding expose information to the <code>package.json</code>.</p>

<p>The following config included in the
<a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/expose-jquery/package.json"><code>package.json</code></a> of this
example project is needed to ensure that browserify runs the <code>browerify-shim</code> transform when bundling this project.</p>


<div class="highlight"><pre><code><span class="p">{</span> 
  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;./js/entry.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;jquery&quot;</span><span class="p">:</span> <span class="s2">&quot;global:
~C1C
quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;browserify-shim&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p><strong>Note:</strong> the <code>global:</code> prefix tells browserify-shim that it should expose the <code>$</code> attached to the <code>window</code> as <code>jquery</code>.</p>


<div class="pilwrap" id="bundling%20via%20the%20command%20line">
  <h3>
    <a href="#bundling%20via%20the%20command%20line" name="bundling%20via%20the%20command%20line" class="pilcrow">&#182;</a>
    Bundling via the command line
  </h3>
</div>


<p>Given this config you can build the bundle via: </p>


<div class="highlight"><pre><code><span class="nx">browserify</span> <span class="o">-</span><span class="nx">d</span> <span class="p">.</span> <span class="o">&gt;</span> <span class="nx">js</span><span class="o">/</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div>



<p>demonstrated <a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/expose-jquery/cli.sh">here</a>.</p>

<p>If you want to turn on browserify shim diagnostics messages set the <code>BROWSERIFYSHIM_DIAGNOSTICS</code> environment variable
when bundling i.e.:</p>


<div class="highlight"><pre><code><span class="nx">BROWSERIFYSHIM_DIAGNOSTICS</span><span class="o">=</span><span class="mi">1</span> <span class="nx">browserify</span> <span class="o">-</span><span class="nx">d</span> <span class="p">.</span> <span class="o">&gt;</span> <span class="nx">js</span><span class="o">/</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div>



<p>demonstrated <a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/expose-jquery/cli-diag.sh">here</a>.</p>

<p><strong>Note</strong> that in both cases the <code>-d</code> flag is added as well in order to turn on browserify sourcemaps.  </p>

<p><strong>Note</strong> <code>.</code> tells browserify to use the current dir as the root of the bundling chain. As a result it finds <code>"main":
"./js/entry.js"</code> in the <code>package.json</code> and thus uses that as the entry point.</p>


<div class="pilwrap" id="bundling%20via%20a%20.js%20script">
  <h3>
    <a href="#bundling%20via%20a%20.js%20script" name="bundling%20via%20a%20.js%20script" class="pilcrow">&#182;</a>
    Bundling via a <code>.js</code> script
  </h3>
</div>


<p>Alternatively you can write a short <code>build.js</code> to perform the bundling step:</p>


<div class="highlight"><pre><code>  <span class="nx">browserify</span><span class="p">()</span>  
    <span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="p">),</span> <span class="p">{</span> <span class="nx">entry</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">bundle</span><span class="p">({</span> <span class="nx">debug</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">))</span> 
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">,</span> <span class="s1">&#39;bundle.js&#39;</span><span class="p">),</span> <span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
</code></pre></div>



<p>demonstrated <a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/expose-jquery/build.js">here</a>.</p>

<p>To run this example:</p>


<div class="highlight"><pre><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">browserify</span><span class="o">-</span><span class="nx">shim</span>
<span class="nx">npm</span> <span class="nx">explore</span> <span class="nx">browserify</span><span class="o">-</span><span class="nx">shim</span>
</code></pre></div>



<p>Then:</p>


<div class="highlight"><pre><code><span class="nx">npm</span> <span class="nx">run</span> <span class="nx">expose</span><span class="o">-</span><span class="nx">jquery</span>
</code></pre></div>



<p>Or to see diagnostic messages:</p>


<div class="highlight"><pre><code><span class="nx">npm</span> <span class="nx">run</span> <span class="nx">expose</span><span class="o">-</span><span class="nx">jquery</span><span class="o">-</span><span class="nx">diag</span>
</code></pre></div>

</div>
  </div>
</body>
</html>
