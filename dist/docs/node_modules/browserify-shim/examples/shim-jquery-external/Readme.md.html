<!DOCTYPE html>
<html>
<head>
  <title>Readme.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../", thisFile = "home/danny/youlooknice/node_modules/browserify-shim/examples/shim-jquery-external/Readmemd", defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#browserify-shim%20jquery%20with%20external%20shim%20file">Browserify-Shim jquery with external shim file</a>
      </div>
      <div class="heading h3">
        <a href="#bundling">Bundling</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="docs markdown">
<div class="pilwrap" id="browserify-shim%20jquery%20with%20external%20shim%20file">
  <h1>
    <a href="#browserify-shim%20jquery%20with%20external%20shim%20file" name="browserify-shim%20jquery%20with%20external%20shim%20file" class="pilcrow">&#182;</a>
    Browserify-Shim jquery with external shim file
  </h1>
</div>


<p>This example demonstrates shimming jquery by adding the shim information to an external <code>shim.js</code>.</p>

<p>The following config included in the
<a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/shim-jquery-external/package.json"><code>package.json</code></a> of this
example project is needed to ensure that browserify runs the <code>browerify-shim</code> transform when bundling this project,
however in this case it <strong>does not include the shim config</strong>:</p>


<div class="highlight"><pre><code><span class="p">{</span>
  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;./js/entry.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;browserify-shim&quot;</span><span class="p">:</span> <span class="s2">&quot;./config/shim.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;browserify-shim&quot;</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p>As you can see the <code>browserify-shim</code> field points to the <a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/shim-jquery-external/config/shim.js">external shim file</a>:</p>


<div class="highlight"><pre><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;../js/vendor/jquery.js&#39;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">exports</span><span class="o">:</span> <span class="s1">&#39;
~C2C
#39;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<p><strong>Note</strong>: we didn't expose <code>./js/vendor/jquery.js</code> as <code>jquery</code> like we did in the <a href="https://github.com/thlorenz/browserify-shim/tree/master/examples/shim-jquery">other jquery
example</a>. Instead our config spells out the
path to <code>./js/vendor/jquery.js</code> relative to the <code>shim.js</code> file.</p>

<p>As a result we also cannot just <code>require('jquery')</code> in our <a href="https://github.com/thlorenz/browserify-shim/blob/master/examples/shim-jquery-external/js/entry.js#L1">entry.js</a>, but have to spell out the relative path here as well, i.e. 
<code>var $ = require('./vendor/jquery')</code>.</p>


<div class="pilwrap" id="bundling">
  <h3>
    <a href="#bundling" name="bundling" class="pilcrow">&#182;</a>
    Bundling
  </h3>
</div>


<p>As explained in the <a href="https://github.com/thlorenz/browserify-shim/tree/master/examples/shim-jquery">shim-jquery example</a>
there are multiple ways to produce the bundle.</p>


<div class="highlight"><pre><code><span class="nx">browserify</span> <span class="o">-</span><span class="nx">d</span> <span class="p">.</span> <span class="o">&gt;</span> <span class="nx">js</span><span class="o">/</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div>



<p>Or with diagnostics:</p>


<div class="highlight"><pre><code><span class="nx">BROWSERIFYSHIM_DIAGNOSTICS</span><span class="o">=</span><span class="mi">1</span> <span class="nx">browserify</span> <span class="o">-</span><span class="nx">d</span> <span class="p">.</span> <span class="o">&gt;</span> <span class="nx">js</span><span class="o">/</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div>



<p>Alternatively you can write a short <code>build.js</code> to perform the bundling step:</p>


<div class="highlight"><pre><code>  <span class="nx">browserify</span><span class="p">()</span>  
    <span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="p">),</span> <span class="p">{</span> <span class="nx">entry</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">bundle</span><span class="p">({</span> <span class="nx">debug</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">))</span> 
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">,</span> <span class="s1">&#39;bundle.js&#39;</span><span class="p">),</span> <span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
</code></pre></div>

</div>
  </div>
</body>
</html>
